<!DOCTYPE html>
<html>

<head>
    <!-- meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <!-- link -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <!-- script -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/locale/ja.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.4.14.js"></script>
    <script src="https://maps.google.com/maps/api/js?key=AIzaSyDv99nzzW5IdxFtVC4r0a0tx6x2RsgpCQA&language=ja"></script>
    <!-- info -->
    <link rel="icon" href="https://vegibus.s3-ap-northeast-1.amazonaws.com/html/template/default/img/common/favicon.ico"
        type="image/x-icon">
    <title>やさいバス</title>

    <!-- CSS -->
    <link rel="stylesheet" href="../static/css/base.css">
    <link rel="stylesheet" href="../static/css/layout.css">
    <link rel="stylesheet" href="../static/css/qrcode.css">


    <!-- {% block css %} -->
    <!-- {% endblock %} -->

</head>

<body>
    <div id="app">
        <v-app>
            <div class="header" id="header">

                <!-- :::GENERAL_HEADER::: -->
                <v-app-bar class="navbar_app" color="#FFF" flat id="navbar" height="88px">

                    <a :href="homepage_url"><img class="navbar_logo" :src="yasaibus_logo" alt="LOGO"></a>
                    <v-toolbar-title class="font_nav">
                        誰もが美味しい食をあたり前に<br>
                        手に入れられる社会を目指して
                    </v-toolbar-title>

                    <v-spacer></v-spacer>

                    <!-- web icon -->
                    <div class="navbar_icon web" v-if="breakpoint == 'web'">
                        <a v-for="(item, i) in header" :key="i" :href="item.href" class="flex-column flex-start web"
                            @mouseover="item.hover = true" @mouseleave="item.hover = false">
                            <img v-if="item.hover == false" :src=item.img :alt=item.page>
                            <img v-else :src=item.hover_img :alt=item.page>
                            <span v-if="item.hover == true" class="font_small font_second">${item.page}$</span>
                        </a>
                    </div>
                    <!-- app icon -->
                    <div class="navbar_icon app" v-if="breakpoint == 'app'">
                        <a v-for="(item, i) in header" :key="i" :href="item.href" class="app">
                            <img :src=item.img :alt=item.page>
                        </a>
                    </div>

                </v-app-bar>

            </div>


            <v-main style="background-color: #F5F5F5;">
                <v-container>

                    <!-- :::GENERAL::: -->

                    <!-- {% block content %} -->
                    <!-- {% endblock %} -->

                    <div class="wrap">
                        <div id="reader"></div>

                        <div class="chips">
                            <v-chip v-show="show_ScanSuccess" color="#89BA34" text-color="white">読み取り成功</v-chip>
                            <v-chip v-show="show_ScanExist" color="#EFB838" text-color="white">重複読み取り</v-chip>
                            <v-chip v-show="show_ScanError" color="#EFB838" text-color="white">このQRコードは無効です</v-chip>
                        </div>

                        <div class="order">
                            <div class="order__left scan" v-if="!ScanSuccess || ScanExist || ScanError">
                                <div class="text_scan">
                                    出荷伝票にあるQRコードを<br>スキャンしてください。
                                </div>
                            </div>
                            <div class="order__left" v-if="ScanSuccess">
                                <div class="order__top">
                                    <p>${order_id}$</p>
                                    <p>${farmer}$</p>
                                </div>
                                <div class="order__bottom">
                                    <div class="order__bottom--left">
                                        <div class="order_box wrap__img">
                                            <img src="../Static/icon/box.png">
                                        </div>
                                        <span class="font_bold">${order_box}$件</span>
                                    </div>
                                    <div class="order__bottom--right">
                                        <div class="item">
                                            <span class="font_medium font_primary">購買者</span>
                                            <span class="font_medium text_break">${buyer}$</span>
                                        </div>
                                        <div class="item">
                                            <span class="font_medium font_primary">集荷バス停</span>
                                            <span class="font_medium text_break">${pickup}$</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="order__right">
                                <div class="order__right--top">
                                    <span class="font_primary font_bold">集荷荷物</span>
                                </div>
                                <div class="order__right--bottom">
                                    <span class="font_bold">${count_box}$件</span>
                                    <div class="line"></div>
                                    <span class="font_bold">${total_box}$件</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- gotop -->
                    <div class="btn__gotop hide">
                        <img src="../static/icon/goTop.png" alt="goTop">
                    </div>

                </v-container>
            </v-main>


            <v-footer class="footer" padless>
                <v-row class="text-center">
                    <a href="https://www.m2-labo.jp/"><img src="../static/icon/m2labo.png" alt="m2labo"></a>
                    <a href="https://www.facebook.com/M2labo"><img src="../static/icon/facebook.png" alt="facebook"></a>
                </v-row>
                <v-row class="text-center">
                    <div v-for="(item, i) in footer">
                        <a :href="item.href" class="font_medium">${item.text}$</a>
                        <span v-if="i != footer.length -1" class="font_white">|</span>
                    </div>

                </v-row>
                <v-row class="text-center">
                    <p class="font_medium">©2018 / やさいバス株式会社</p>
                </v-row>
            </v-footer>
        </v-app>
    </div>


    <!-- {% block javascript %} -->
    <!-- {% endblock %} -->
    <script src="../static/js/layout.js"></script>
    <script src="../static/js/qrcode.js"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>


    <script>
        let app = new Vue({
            el: '#app',
            delimiters: ['${', '}$'],
            vuetify: new Vuetify(),
            data: () => ({
                breakpoint: "",
                homepage_url: "#homepage_url",
                yasaibus_logo: '../static/img/yasaibus_logo.png',
                menu_img: '../static/icon/menu.png',
                header: [
                    {
                        page: 'カレンダー',
                        img: '../static/icon/calendar.png',
                        hover_img: '../static/icon/calendar_second.png',
                        hover: false,
                        href: '#calendar',
                    },
                    {
                        page: 'お問い合わせ',
                        img: '../static/icon/contact.png',
                        hover_img: '../static/icon/contact_second.png',
                        hover: false,
                        href: '#contact',
                    },
                    {
                        page: 'ログアウト',
                        img: '../static/icon/logout.png',
                        hover_img: '../static/icon/logout_second.png',
                        hover: false,
                        href: '#logout',
                    },
                ],

                footer: [
                    {
                        text: 'プライバシーポリシー',
                        href: '#privacy_url',
                    },
                    {
                        text: 'お問い合わせ',
                        href: '#contact_url',
                    },
                    {
                        text: '利用規約',
                        href: '#agreement_url',
                    },
                    {
                        text: '会社情報',
                        href: '#',
                    },
                ],

                // ------------------------------------------------------------------------

                ScanSuccess: false,
                ScanError: false,
                ScanExist: false,

                show_ScanSuccess: false,
                show_ScanError: false,
                show_ScanExist: false,

                // order
                order_id: '',
                farmer: '',
                order_box: 0,
                buyer: '',
                pickup: '',
                count_box: 0,
                total_box: 0,



                // main content data
                // {% block data %}
                // {% endblock %}
            }),

            methods: {
                //   {% block method %}
                //   {% endblock %}
                function() {
                    document.getElementsByTagName("html")[0].style.visibility = "visible";
                },

                Show() {
                    setTimeout(() => {
                        this.show = true;
                    }, 2000);
                },

            },

            computed: {

            },
            mounted() {

                if (window.innerWidth > 767) {
                    this.breakpoint = 'web'
                } else {
                    this.breakpoint = 'app'
                }

                window.onresize = () => {
                    if (window.innerWidth > 767) {
                        this.breakpoint = 'web'
                    } else {
                        this.breakpoint = 'app'
                    }
                };
            },

            watch: {
                ScanSuccess(val) {
                    this.show_ScanSuccess = this.ScanSuccess;
                    val && setTimeout(() => {
                        this.show_ScanSuccess = false;
                    }, 3000)
                },
                ScanError(val) {
                    this.show_ScanError = this.ScanError;
                    val && setTimeout(() => {
                        this.ScanError = false
                    }, 3000)
                },
                ScanExist(val) {
                    this.show_ScanExist = this.ScanExist;
                    val && setTimeout(() => {
                        this.ScanExist = false
                    }, 3000)
                },

            },
        })


    </script>

</body>

</html>